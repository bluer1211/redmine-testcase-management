# CSV インポート仕様

各種CSVインポートの仕様を説明する。

* テスト計画のインポート
* テスト項目のインポート
* テスト実行結果のインポート

## テスト計画のインポート

テスト計画のインポート対象のCSVは次のカラムから構成される。
(テスト計画の一覧からエクスポートして異なるプロジェクトで再利用する前提)

* `#` (オプション)
* テスト計画
* ステータス
* 想定バグ数
* ユーザー
* 開始日
* 終了日
* テスト項目

v1.4.0以降: テスト計画IDおよびテスト計画の内容によって上書きするかどうかの挙動が変化する。詳細は個別の項目の説明を参照のこと。

v1.3.0以前: テスト計画のインポートは常に追加され、既存のテスト計画の上書きはしない。

### `#` (オプション)

v1.4.0のテスト計画IDのマッピング追加に対応させるカラム。
テスト計画のIDを明示的に指定して更新するときのみ指定する。

v1.3.0以前: 予約済みのカラム。値を指定してもCSVインポート時には使われない。

### テスト計画

テスト計画の名称を指定する。

v1.4.0以降: 既存のテスト計画と名称が同一であれば、既存のテスト計画を更新する。

v1.3.0以前: 既存のテスト計画と名称が同一でも、新規テスト計画として追加される。

### ステータス

テスト計画のステータスを指定する。
チケットのステータスのいずれかを指定することができる。
Redmineのカスタマイズに依存するが、New, In Progress, Resolved, Feedback, Closed, Rejectedなどが指定できる。

### 想定バグ数

テスト計画の想定バグ数を指定する。

### ユーザー

テスト項目のユーザーに登録する内容を指定する。

* ユーザー名(姓名)もしくはメールアドレスを指定できる
* 指定するユーザーはプロジェクトのメンバーでなければならない
* CSVインポート時にインポート対象のカラムをマッピングしていないか、指定したユーザーがプロジェクトメンバーに存在しない場合には、CSVインポートを実行したアカウントでユーザーが登録される
* ユーザーに名前(姓名)を指定したときに同姓同名がいた場合は、プロジェクトに参加しているRedmineに先に登録されたユーザー(IDが小さい)として登録される

### 開始日

テスト項目の開始日に登録する内容を指定する。
インポート時の設定で指定する日付の形式に一致していなければならない。

### 終了日

テスト項目の終了日に登録する内容を指定する。
インポート時の設定で指定する日付の形式に一致していなければならない。

### テスト項目

テスト計画に関連付けるテスト項目のIDを指定する。
IDはカンマ区切りで複数指定できる。

## テスト項目のインポート

テスト項目のインポート対象のCSVは次のカラムから構成される。 (テスト項目の一覧からエクスポートして異なるプロジェクトで再利用する前提)

* `#` (オプション)
* テスト計画(オプション)
* テスト項目
* シナリオ
* 期待する結果
* 環境
* ユーザー


テスト項目をCSVエクスポートする際、実行結果や実行日もエクスポートされるが、これら項目をテスト項目のインポートでインポートすることはできない。

v1.5.0以降: テスト項目の上書きチェックボックスの内容によって上書きするかどうかの挙動が変化する。(既定では、テスト項目の上書きは無効なので、新規インポートを行う)

v1.3.0以前: テスト項目のインポートは常に追加であり、既存のテスト項目の上書きはしない。

### `#` (オプション)

v1.4.0のテスト項目IDのマッピング追加に対応させるカラム。

v1.4.0以降: テスト項目のIDを明示的に指定して更新するときのみ指定する。

v1.3.0以前: 予約済みのカラム。値を指定してもCSVインポート時には使われない。

### テスト計画(オプション)

テスト計画に関連したテスト項目を作成するために指定する。
テスト計画は名前もしくは、IDで指定する。
ここで指定するテスト計画はあらかじめ存在している必要があり、存在しない場合テスト計画にひもづかないテスト項目が作成される。

### テスト項目

テスト項目の名称を指定する。

v1.5.0以降: テスト項目の上書きが有効な場合、同一の名称のテスト項目があれば、既存のテスト項目を更新する。テスト項目の上書きが無効もしくは、同一の名称のテスト項目が存在しない場合、新規テスト項目としてインポートされる。

v1.4.0以降: すでに同一の名称のテスト項目があれば、既存のテスト項目を更新する。

v1.3.0以前: すでに同一の名称が使われていても、上書きすることなく新規テスト項目を作成する。

### シナリオ

テスト項目のシナリオに登録する内容を指定する。

### 期待する結果

テスト項目の期待する結果に登録する内容を指定する。

### 環境

テスト項目の環境に登録する内容を指定する。

### ユーザー

テスト項目のユーザーに登録する内容を指定する。

* ユーザー名(姓名)もしくはメールアドレスを指定できる
* 指定するユーザーはプロジェクトのメンバーでなければならない
* CSVインポート時にインポート対象のカラムをマッピングしていないか、指定したユーザーがプロジェクトメンバーに存在しない場合には、CSVインポートを実行したアカウントでユーザーが登録される
* ユーザーに名前(姓名)を指定したときに同姓同名がいた場合は、プロジェクトに参加しているRedmineに先に登録されたユーザー(IDが小さい)として登録する

## テスト実行結果のインポート

テスト実行結果のインポート対象のCSVは次のカラムから構成される。
(テスト実行結果の一覧からエクスポートして異なるプロジェクトで再利用する前提)

* `#` (予約済み)
* テスト計画
* テスト項目
* シナリオ
* 期待する結果
* 実行結果
* ユーザー
* 実行日
* コメント
* チケット

テスト実行結果のインポートは常に追加され、既存のテスト実行結果の上書きはしない。

### `#` (予約済み)

予約済みのカラム。値を指定してもCSVインポート時には使われない。

### テスト計画

テスト実行結果を関連付けたいテスト項目を指定する。
テスト計画のIDを指定する。(v1.4.0以降では、IDのかわりにテスト計画名も指定できる)

指定したテスト計画のIDがプロジェクトに存在しない場合は、テスト計画を関連付けられず失敗する。

### テスト項目

テスト実行結果を関連付けたいテスト項目を指定する。
テスト項目のIDを指定する。(v1.4.0以降では、IDのかわりにテスト項目名も指定できる)

指定したテスト項目のIDがプロジェクトに存在しない場合は、テスト項目を関連付けられず失敗する。

### シナリオ

使用しない。

### 期待する結果

使用しない。

### 実行結果

テスト実行結果に登録する内容を指定する。
Redmineのカスタマイズにもよるが、「成功」「失敗」もしくは「Succeed」「Failure」など指定する。

### ユーザー

テスト実行結果のユーザーに登録する内容を指定する。

* ユーザー名(姓名)もしくはメールアドレスを指定できる
* 指定するユーザーはプロジェクトのメンバーでなければならない
* CSVインポート時にインポート対象のカラムをマッピングしていないか、指定したユーザーがプロジェクトメンバーに存在しない場合には、CSVインポートを実行したアカウントでユーザーが登録される
* ユーザーに名前(姓名)を指定したときに同姓同名がいた場合は、プロジェクトに参加しているRedmineに先に登録されたユーザー(IDが小さい)として登録する

### 実行日

テスト実行結果の実行日に登録する内容を指定する。
インポート時の設定で指定する日付の形式に一致していなければならない。

### コメント

テスト実行結果のコメントに登録する内容を指定する。

### チケット

テスト実行結果のチケットに登録する内容を指定する。
関連付けたいチケット番号を1つだけ指定できる。

