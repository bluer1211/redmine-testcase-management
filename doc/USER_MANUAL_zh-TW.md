# Redmine 測試案例管理插件 - 完整操作手冊

## 📋 目錄

1. [插件概述](#插件概述)
2. [系統需求](#系統需求)
3. [安裝與設定](#安裝與設定)
4. [權限配置](#權限配置)
5. [基本操作](#基本操作)
6. [測試計劃管理](#測試計劃管理)
7. [測試案例管理](#測試案例管理)
8. [測試執行管理](#測試執行管理)
9. [匯入匯出功能](#匯入匯出功能)
10. [查詢與篩選](#查詢與篩選)
11. [統計報表](#統計報表)
12. [批量操作](#批量操作)
13. [常見問題](#常見問題)
14. [故障排除](#故障排除)
15. [更新日誌](#更新日誌)

---

## 🎯 插件概述

Redmine 測試案例管理插件是一個功能完整的測試管理解決方案，為 Redmine 專案提供：

- 📋 **測試計劃管理** - 建立和管理測試計劃
- 🧪 **測試案例管理** - 設計和維護詳細的測試案例
- ✅ **測試執行追蹤** - 記錄和追蹤測試執行結果
- 📊 **統計報表** - 提供測試覆蓋率和執行統計
- 📥 **CSV 匯入/匯出** - 支援大量資料的批次處理
- 🔍 **進階查詢** - 強大的篩選和搜尋功能
- 🌐 **多語言支援** - 支援英文、日文和繁體中文
- 🔗 **關聯管理** - 測試案例與測試計劃的關聯管理

### 主要功能特色

- **完整的測試生命週期管理**
- **直觀的使用者介面**
- **強大的權限控制系統**
- **豐富的統計和分析功能**
- **靈活的匯入匯出選項**
- **智能的關聯和重定向功能**
- **完整的繁體中文支援**

---

## 💻 系統需求

### 基本需求
- **Redmine**: 6.0.6 或更新版本
- **Rails**: 7.2.2.1 或更新版本
- **Ruby**: 3.0 或更新版本

### 資料庫支援
- **PostgreSQL**: 12 或更新版本
- **MySQL**: 8 或更新版本
- **MariaDB**: 10.2 或更新版本

### 瀏覽器支援
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

---

## 🚀 安裝與設定

### 1. 下載插件

```bash
cd /path/to/redmine/plugins
git clone https://github.com/bluer1211/redmine-testcase-management.git testcase_management
```

### 2. 安裝依賴

```bash
cd /path/to/redmine
bundle install
```

### 3. 執行資料庫遷移

```bash
bin/rails redmine:plugins:migrate RAILS_ENV=production
```

### 4. 重啟 Redmine

```bash
# 重啟您的 Redmine 服務
```

### 5. Redmine 6.0.6 額外設定

由於 Redmine 6.0.6 的路由限制，需要手動修改 `config/routes.rb` 文件：

找到以下行：
```ruby
constraints object_type: /(issues|versions|news|messages|wiki_pages|projects|documents|journals)/ do
```

修改為：
```ruby
constraints object_type: /(issues|versions|news|messages|wiki_pages|projects|documents|journals|test_cases|test_case_executions)/ do
```

### 6. 啟用插件

1. 登入 Redmine 管理員帳號
2. 進入 **管理** → **插件**
3. 找到 **Redmine Testcase Management Plugin**
4. 點擊 **設定** 進行配置

---

## 🔐 權限配置

### 權限概述

插件提供 **12 個權限**，分為三個主要功能模組：

#### 測試案例權限 (4個)
- **查看測試案例** - 瀏覽測試案例列表和詳細內容
- **新增測試案例** - 建立新的測試案例
- **編輯測試案例** - 修改現有測試案例
- **刪除測試案例** - 刪除測試案例

#### 測試計劃權限 (4個)
- **查看測試計劃** - 瀏覽測試計劃列表和詳細內容
- **新增測試計劃** - 建立新的測試計劃
- **編輯測試計劃** - 修改現有測試計劃
- **刪除測試計劃** - 刪除測試計劃

#### 測試執行權限 (4個)
- **查看測試執行** - 瀏覽測試執行記錄
- **新增測試執行** - 建立新的測試執行記錄
- **編輯測試執行** - 修改測試執行記錄
- **刪除測試執行** - 刪除測試執行記錄

### 設定權限

1. 進入 **管理** → **角色與權限**
2. 選擇要設定的角色（如：開發者、測試者、專案經理）
3. 點擊 **編輯**
4. 在 **專案** 標籤頁中，找到 **測試案例管理** 模組
5. 勾選需要的權限
6. 點擊 **儲存**

### 權限繼承說明

由於插件繼承了 Issue 的權限，相應的 Issue 權限也必須啟用：

- 要編輯測試計劃，需要同時啟用「編輯測試計劃」和「編輯問題」權限
- 要新增測試案例，需要同時啟用「新增測試案例」和「新增問題」權限

---

## 🎯 基本操作

### 存取測試案例管理

1. 進入專案頁面
2. 在左側選單中點擊 **測試案例管理**
3. 系統會顯示測試案例列表頁面

### 介面概覽

測試案例管理介面包含以下主要區域：

- **頂部導航** - 顯示當前位置和操作按鈕
- **左側選單** - 提供快速導航和篩選選項
- **主要內容區** - 顯示列表或詳細資訊
- **右側邊欄** - 顯示相關資訊和操作選項

### 基本操作按鈕

- **新增** - 建立新的項目
- **編輯** - 修改現有項目
- **刪除** - 刪除項目
- **匯入** - 從 CSV 檔案匯入資料
- **匯出** - 將資料匯出為 CSV 檔案
- **篩選** - 設定查詢條件
- **統計** - 查看統計報表

---

## 📋 測試計劃管理

### 建立測試計劃

1. 在測試案例管理頁面，點擊 **測試計劃** 標籤
2. 點擊 **新增測試計劃** 按鈕
3. 填寫以下資訊：
   - **測試計劃名稱** - 必填，描述測試計劃的目的
   - **開始日期** - 測試計劃的開始日期
   - **結束日期** - 測試計劃的結束日期
   - **負責人** - 測試計劃的主要負責人
   - **預估錯誤數** - 預估可能發現的錯誤數量
   - **狀態** - 測試計劃的當前狀態
4. 點擊 **建立** 儲存

### 編輯測試計劃

1. 在測試計劃列表中，點擊要編輯的測試計劃
2. 點擊 **編輯** 按鈕
3. 修改相關資訊
4. 點擊 **更新** 儲存變更

### 分配測試案例

1. 進入測試計劃詳細頁面
2. 在 **測試案例** 區段，點擊 **新增測試案例**
3. 輸入測試案例 ID 或使用自動完成功能搜尋
4. 點擊 **新增** 完成分配

### 移除測試案例

1. 在測試計劃的測試案例列表中
2. 點擊要移除的測試案例旁的 **移除** 按鈕
3. 確認移除操作

### 查看測試計劃統計

1. 在測試計劃列表中，點擊 **統計** 按鈕
2. 查看以下統計資訊：
   - 測試案例總數
   - 已執行測試案例數
   - 通過率
   - 失敗率
   - 執行進度

---

## 🧪 測試案例管理

### 建立測試案例

1. 在測試案例管理頁面，點擊 **新增測試案例** 按鈕
2. 填寫以下資訊：
   - **測試案例名稱** - 必填，描述測試案例的目的
   - **測試計劃** - 選擇要關聯的測試計劃（可選）
   - **負責人** - 測試案例的負責人
   - **環境** - 測試執行的環境（如：開發、測試、生產）
   - **測試情境** - 必填，詳細描述測試步驟
   - **預期結果** - 必填，描述預期的測試結果
3. 點擊 **建立** 儲存

### 編輯測試案例

1. 在測試案例列表中，點擊要編輯的測試案例
2. 點擊 **編輯** 按鈕
3. 修改相關資訊：
   - 可以變更關聯的測試計劃
   - 修改其他所有欄位
4. 點擊 **更新** 儲存變更

### 查看測試案例詳細資訊

測試案例詳細頁面顯示：

- **基本資訊** - 名稱、負責人、環境等
- **測試情境** - 詳細的測試步驟
- **預期結果** - 預期的測試結果
- **關聯的測試計劃** - 該測試案例屬於哪些測試計劃（可點擊連結）
- **執行歷史** - 該測試案例的執行記錄
- **附件** - 相關的附件檔案（如果啟用）

### 測試計劃關聯功能

#### 新增時選擇測試計劃
- 在建立測試案例時，可以直接選擇要關聯的測試計劃
- 下拉選單會顯示當前專案的所有測試計劃
- 選擇後會自動建立關聯關係

#### 編輯時變更測試計劃
- 在編輯測試案例時，可以變更關聯的測試計劃
- 系統會自動更新關聯關係
- 原有的測試計劃關聯會被移除，新的關聯會被建立

#### 測試案例列表中的測試計劃顯示
- 測試案例列表會顯示「測試計劃」欄位
- 顯示所有關聯的測試計劃名稱
- 測試計劃名稱是可點擊的連結，直接跳轉到測試計劃頁面
- 多個測試計劃會用逗號分隔顯示

### 批量操作

1. 在測試案例列表中，勾選要操作的測試案例
2. 點擊 **批量編輯** 按鈕
3. 選擇要修改的欄位
4. 設定新的值
5. 點擊 **更新** 套用變更

---

## ✅ 測試執行管理

### 建立測試執行記錄

1. 在測試案例詳細頁面，點擊 **新增執行** 按鈕
2. 或從測試計劃頁面，點擊 **新增測試執行**
3. 填寫以下資訊：
   - **測試計劃** - 自動填入（唯讀）
   - **測試案例** - 自動填入（唯讀）
   - **環境** - 自動填入測試案例的環境
   - **測試情境** - 自動填入（唯讀）
   - **預期結果** - 自動填入（唯讀）
   - **執行結果** - 選擇通過或失敗
   - **執行者** - 執行測試的人員
   - **執行日期** - 測試執行的日期
   - **關聯問題** - 如果測試失敗，關聯的問題 ID
   - **備註** - 執行過程中的備註
4. 選擇提交方式：
   - 點擊 **建立**：創建執行記錄並回到測試案例頁面
   - 點擊 **建立並繼續**：創建執行記錄並繼續新增下一個執行記錄

### 智能重定向功能

#### 建立後重定向
- **建立** 按鈕：創建執行記錄後重定向到測試案例詳細頁面
- **建立並繼續** 按鈕：創建執行記錄後重定向到新的執行記錄建立頁面

#### 重定向邏輯
- 系統會根據用戶的選擇進行智能重定向
- 確保用戶體驗的連續性和便利性
- 避免重複操作和頁面跳轉混亂

### 編輯測試執行記錄

1. 在測試執行列表中，點擊要編輯的記錄
2. 點擊 **編輯** 按鈕
3. 修改相關資訊
4. 點擊 **更新** 儲存變更

### 查看執行歷史

測試執行記錄包含：

- **執行結果** - 通過/失敗
- **執行者** - 執行測試的人員
- **執行日期** - 測試執行的日期
- **關聯問題** - 失敗時關聯的問題
- **備註** - 執行過程中的說明

### 執行結果分析

- **通過率** - 成功執行的測試案例比例
- **失敗率** - 失敗的測試案例比例
- **趨勢分析** - 執行結果的變化趨勢
- **問題關聯** - 失敗測試案例與問題的關聯分析

---

## 📥 匯入匯出功能

### CSV 匯入

#### 匯入測試案例

1. 在測試案例列表頁面，點擊 **匯入** 按鈕
2. 選擇 CSV 檔案
3. 設定匯入格式：
   - 選擇分隔符（逗號、分號、Tab）
   - 設定編碼（UTF-8、Big5 等）
4. 進行欄位對應：
   - 將 CSV 欄位對應到系統欄位
   - 設定必填欄位
5. 點擊 **匯入** 開始處理
6. 查看匯入結果和錯誤報告

#### 匯入測試計劃

1. 在測試計劃列表頁面，點擊 **匯入** 按鈕
2. 選擇 CSV 檔案
3. 設定匯入格式和欄位對應
4. 點擊 **匯入** 開始處理

#### 匯入測試執行

1. 在測試執行列表頁面，點擊 **匯入** 按鈕
2. 選擇 CSV 檔案
3. 設定匯入格式和欄位對應
4. 點擊 **匯入** 開始處理

### CSV 匯出

#### 匯出測試案例

1. 在測試案例列表頁面，設定篩選條件
2. 點擊 **匯出** 按鈕
3. 選擇匯出格式：
   - CSV 格式
   - 包含的欄位
   - 編碼設定
4. 點擊 **匯出** 下載檔案

#### 匯出測試計劃

1. 在測試計劃列表頁面，設定篩選條件
2. 點擊 **匯出** 按鈕
3. 選擇匯出格式和欄位
4. 點擊 **匯出** 下載檔案

#### 匯出測試執行

1. 在測試執行列表頁面，設定篩選條件
2. 點擊 **匯出** 按鈕
3. 選擇匯出格式和欄位
4. 點擊 **匯出** 下載檔案

### CSV 檔案格式

#### 測試案例 CSV 格式
```csv
名稱,負責人,環境,測試情境,預期結果
登入功能測試,張三,測試環境,1. 開啟瀏覽器 2. 輸入網址 3. 輸入帳號密碼,成功登入系統
```

#### 測試計劃 CSV 格式
```csv
名稱,開始日期,結束日期,負責人,預估錯誤數,狀態
系統測試計劃,2024-01-01,2024-01-31,李四,10,進行中
```

#### 測試執行 CSV 格式
```csv
測試案例,測試計劃,執行結果,執行者,執行日期,關聯問題,備註
登入功能測試,系統測試計劃,通過,王五,2024-01-15,,測試正常
```

---

## 🔍 查詢與篩選

### 基本篩選

每個列表頁面都提供基本篩選功能：

- **狀態篩選** - 根據項目狀態篩選
- **負責人篩選** - 根據負責人篩選
- **日期範圍篩選** - 根據建立或修改日期篩選
- **關鍵字搜尋** - 在名稱和描述中搜尋

### 進階查詢

1. 點擊 **查詢** 按鈕
2. 設定查詢條件：
   - 選擇要查詢的欄位
   - 設定運算子（等於、包含、大於等）
   - 輸入查詢值
3. 可以組合多個條件
4. 點擊 **套用** 執行查詢

### 欄位排序

#### 測試案例列表排序
- **ID** - 按測試案例 ID 排序
- **名稱** - 按測試案例名稱排序
- **負責人** - 按負責人排序
- **環境** - 按環境排序
- **最新結果** - 按最新執行結果排序
- **最新執行日期** - 按最新執行日期排序
- **測試情境** - 按測試情境排序
- **預期結果** - 按預期結果排序

#### 測試計劃列表排序
- **ID** - 按測試計劃 ID 排序
- **名稱** - 按測試計劃名稱排序
- **狀態** - 按狀態排序
- **預估錯誤數** - 按預估錯誤數排序
- **負責人** - 按負責人排序
- **開始日期** - 按開始日期排序
- **結束日期** - 按結束日期排序

#### 測試執行列表排序
- **ID** - 按執行記錄 ID 排序
- **測試案例** - 按測試案例排序
- **測試計劃** - 按測試計劃排序
- **結果** - 按執行結果排序
- **執行者** - 按執行者排序
- **問題** - 按關聯問題排序
- **備註** - 按備註排序
- **執行日期** - 按執行日期排序

### 儲存查詢

1. 設定查詢條件後
2. 點擊 **儲存查詢** 按鈕
3. 輸入查詢名稱
4. 選擇是否設為預設查詢
5. 點擊 **儲存**

### 載入查詢

1. 點擊 **載入查詢** 按鈕
2. 從下拉選單中選擇已儲存的查詢
3. 系統會自動套用查詢條件

---

## 📊 統計報表

### 測試案例統計

1. 在測試案例列表頁面，點擊 **統計** 按鈕
2. 查看以下統計資訊：
   - **總數統計** - 測試案例總數
   - **狀態分布** - 各狀態的測試案例數量
   - **負責人分布** - 各負責人的測試案例數量
   - **建立趨勢** - 測試案例建立的時間趨勢

### 測試計劃統計

1. 在測試計劃列表頁面，點擊 **統計** 按鈕
2. 查看以下統計資訊：
   - **進度統計** - 測試計劃的完成進度
   - **執行統計** - 測試執行的統計資訊
   - **通過率統計** - 測試通過率分析
   - **時間統計** - 測試計劃的時間分析

### 測試執行統計

1. 在測試執行列表頁面，點擊 **統計** 按鈕
2. 查看以下統計資訊：
   - **結果分布** - 通過/失敗的分布
   - **執行趨勢** - 執行結果的時間趨勢
   - **執行者統計** - 各執行者的執行統計
   - **問題關聯** - 失敗測試與問題的關聯分析

### 圖表顯示

統計報表提供多種圖表顯示：

- **圓餅圖** - 顯示分布比例
- **長條圖** - 顯示數量比較
- **折線圖** - 顯示趨勢變化
- **表格** - 顯示詳細數據

---

## 🔄 批量操作

### 批量編輯

1. 在列表頁面，勾選要編輯的項目
2. 點擊 **批量編輯** 按鈕
3. 選擇要修改的欄位
4. 設定新的值
5. 點擊 **更新** 套用變更

### 批量刪除

1. 在列表頁面，勾選要刪除的項目
2. 點擊 **批量刪除** 按鈕
3. 確認刪除操作
4. 系統會顯示刪除結果

### 批量匯出

1. 在列表頁面，勾選要匯出的項目
2. 點擊 **匯出** 按鈕
3. 選擇匯出格式
4. 點擊 **匯出** 下載檔案

### 右鍵選單

在列表項目上按右鍵，可以快速執行以下操作：

- **編輯** - 編輯選中的項目
- **刪除** - 刪除選中的項目
- **複製** - 複製項目資訊
- **查看詳細** - 查看項目詳細資訊

---

## ❓ 常見問題

### Q1: 如何啟用測試案例管理功能？

**A:** 請確認以下步驟：
1. 插件已正確安裝
2. 資料庫遷移已執行
3. 在專案設定中啟用了「測試案例管理」模組
4. 已為使用者角色配置適當的權限

### Q2: 為什麼無法建立測試案例？

**A:** 可能的原因：
1. 缺少「新增測試案例」權限
2. 缺少「新增問題」權限（繼承權限）
3. 專案未啟用測試案例管理模組
4. 選擇的負責人沒有適當的權限

### Q3: 如何關聯測試案例與測試計劃？

**A:** 方法：
1. **建立時關聯**：在建立測試案例時直接選擇測試計劃
2. **編輯時關聯**：在編輯測試案例時變更測試計劃
3. **從測試計劃分配**：在測試計劃頁面新增測試案例

### Q4: 為什麼測試計劃欄位無法排序？

**A:** 由於技術限制：
- 測試案例可能關聯多個測試計劃
- 複雜的 SQL 查詢與 MySQL 的 ONLY_FULL_GROUP_BY 模式衝突
- 為確保系統穩定性，測試計劃欄位設為不可排序

### Q5: CSV 匯入失敗怎麼辦？

**A:** 請檢查：
1. CSV 檔案格式是否正確
2. 欄位對應是否正確
3. 必填欄位是否已填寫
4. 編碼設定是否正確

### Q6: 如何查看測試執行歷史？

**A:** 方法：
1. 進入測試案例詳細頁面
2. 查看「執行歷史」區段
3. 或進入測試執行列表頁面查看所有記錄

### Q7: 如何設定測試計劃的進度？

**A:** 步驟：
1. 編輯測試計劃
2. 設定開始日期和結束日期
3. 分配測試案例
4. 執行測試並記錄結果
5. 系統會自動計算進度

### Q8: 為什麼附件功能無法使用？

**A:** 目前附件功能暫時停用：
- 由於 `acts_as_attachable` 模組載入問題
- 為確保系統穩定性，暫時停用附件功能
- 未來版本會修復此問題

### Q9: 如何連續建立多個測試執行記錄？

**A:** 使用「建立並繼續」功能：
1. 在測試執行建立頁面填寫資訊
2. 點擊「建立並繼續」按鈕
3. 系統會建立記錄並跳轉到新的建立頁面
4. 可以連續建立多個執行記錄

### Q10: 如何查看測試案例關聯的所有測試計劃？

**A:** 方法：
1. 進入測試案例詳細頁面
2. 查看「關聯的測試計劃」區段
3. 所有關聯的測試計劃都會顯示為可點擊的連結
4. 點擊連結可直接跳轉到對應的測試計劃頁面

### Q11: 為什麼測試計劃詳細頁面的分頁計數不正確？

**A:** 此問題已在 v1.6.6 版本中修正：
- **問題**：分頁顯示錯誤計數（如顯示 1-12/12 但實際只有 6 筆記錄）
- **原因**：複雜的 SQL JOIN 查詢導致重複計算
- **解決**：優化查詢邏輯，使用 distinct 避免重複計算

### Q12: CSV 匯出時出現重複欄位怎麼辦？

**A:** 此問題已在 v1.6.6 版本中修正：
- **問題**：測試計劃 CSV 匯出出現重複的「測試案例 IDs」和「測試案例」欄位
- **原因**：匯出邏輯未檢查欄位是否已存在
- **解決**：修正匯出邏輯，避免重複欄位

### Q13: 測試計劃匯入失敗怎麼辦？

**A:** 此問題已在 v1.6.6 版本中修正：
- **問題**：測試計劃匯入時無法成功新增或更新記錄
- **原因**：專案識別邏輯與 TestCaseImport 不一致
- **解決**：對齊匯入邏輯，確保專案識別正確

### Q14: 點擊測試計劃連結出現「找不到專案」錯誤？

**A:** 此問題已在 v1.6.6 版本中修正：
- **問題**：在測試案例頁面點擊測試計劃連結時出現「找不到專案」錯誤
- **原因**：URL 生成使用了專案名稱而非專案識別碼
- **解決**：統一使用專案識別碼生成 URL，確保路由正確性

---

## 🔧 故障排除

### 常見錯誤訊息

#### 錯誤：權限不足
**解決方法：**
1. 檢查使用者權限設定
2. 確認專案角色配置
3. 檢查繼承權限設定

#### 錯誤：資料庫連線失敗
**解決方法：**
1. 檢查資料庫設定
2. 確認資料庫服務是否運行
3. 檢查網路連線

#### 錯誤：CSV 匯入失敗
**解決方法：**
1. 檢查 CSV 檔案格式
2. 確認欄位對應正確
3. 檢查編碼設定
4. 查看錯誤日誌

#### 錯誤：測試案例建立失敗
**解決方法：**
1. 檢查必填欄位是否已填寫
2. 確認選擇的負責人是否有適當權限
3. 檢查測試計劃是否存在
4. 查看系統錯誤日誌

#### 錯誤：測試執行建立失敗
**解決方法：**
1. 檢查執行結果是否正確設定
2. 確認執行者是否有適當權限
3. 檢查執行日期格式
4. 查看系統錯誤日誌

#### 錯誤：分頁計數不正確
**解決方法：**
1. 升級到 v1.6.6 或更新版本
2. 如果問題持續，檢查資料庫中的重複記錄
3. 重新整理頁面
4. 檢查瀏覽器快取

#### 錯誤：CSV 匯出重複欄位
**解決方法：**
1. 升級到 v1.6.6 或更新版本
2. 檢查查詢設定中的欄位選擇
3. 重新設定查詢條件
4. 清除瀏覽器快取

#### 錯誤：測試計劃匯入失敗
**解決方法：**
1. 升級到 v1.6.6 或更新版本
2. 檢查 CSV 檔案格式和編碼
3. 確認專案設定正確
4. 檢查權限設定

#### 錯誤：測試計劃連結「找不到專案」
**解決方法：**
1. 升級到 v1.6.6 或更新版本
2. 確認專案識別碼正確
3. 檢查專案是否已啟用測試案例管理模組
4. 重新整理頁面

### 日誌檢查

#### 查看 Redmine 日誌
```bash
tail -f /path/to/redmine/log/production.log
```

#### 查看插件日誌
```bash
tail -f /path/to/redmine/log/redmine_testcase_management.log
```

#### Docker 環境日誌檢查
```bash
docker logs redmine_606-redmine-1 --tail 100
```

### 效能優化

#### 資料庫優化
1. 定期清理舊的測試執行記錄
2. 建立適當的資料庫索引
3. 定期備份資料

#### 系統優化
1. 調整 Redmine 記憶體設定
2. 使用快取機制
3. 定期重啟服務

### 備份與還原

#### 備份測試資料
```bash
# 備份測試案例相關表格
pg_dump -t test_cases -t test_plans -t test_case_executions redmine_db > testcase_backup.sql
```

#### 還原測試資料
```bash
# 還原測試案例相關表格
psql redmine_db < testcase_backup.sql
```

---

## 📝 更新日誌

### v1.6.6 (2025年1月) - 最新版本

#### 🐛 錯誤修復
- **修正分頁計數錯誤**：解決測試計劃詳細頁面中測試案例分頁顯示錯誤計數的問題（顯示 1-12/12 而非實際的 1-6/6）
- **修正 CSV 匯出重複欄位**：解決測試計劃 CSV 匯出中出現重複的「測試案例 IDs」和「測試案例」欄位問題
- **修正測試計劃匯入失敗**：解決測試計劃匯入時無法成功新增或更新記錄的問題，對齊 TestCaseImport 的邏輯
- **修正測試計劃連結錯誤**：解決測試案例頁面中點擊測試計劃連結時出現「找不到專案」錯誤的問題

#### 🔧 功能改進
- **查詢邏輯優化**：改進 TestCaseQuery 中的 test_case_count 方法，使用更簡潔和準確的查詢邏輯
- **資料一致性**：在 TestCase 模型中添加 distinct 到 with_latest_result scope，防止重複記錄
- **URL 路由修正**：統一使用專案識別碼而非專案名稱生成 URL，確保路由正確性

### v1.6.3 (2025年1月)

#### 🆕 新增功能
- **測試計劃關聯功能**：測試案例新增和編輯時可直接選擇測試計劃
- **測試計劃顯示功能**：測試案例列表顯示關聯的測試計劃欄位
- **測試計劃連結功能**：測試計劃名稱可點擊跳轉到對應頁面
- **智能重定向功能**：測試執行建立後根據用戶選擇進行智能重定向
- **建立並繼續功能**：測試執行建立頁面新增「建立並繼續」按鈕
- **完整繁體中文支援**：所有介面元素都支援繁體中文顯示

#### 🔧 功能改進
- **權限系統優化**：修正所有權限檢查，使用正確的測試案例權限
- **用戶選擇優化**：改進用戶選擇邏輯，確保選擇的用戶有適當權限
- **錯誤處理改進**：增強錯誤處理和用戶提示
- **查詢功能優化**：改進查詢欄位的翻譯和顯示
- **表單驗證改進**：增強表單驗證和錯誤提示

#### 🐛 錯誤修復
- **測試案例建立失敗**：修復權限檢查和用戶分配問題
- **測試案例顯示錯誤**：修復 Internal error 問題
- **測試執行建立失敗**：修復 `save_attachments` 錯誤
- **測試計劃更新失敗**：修復測試計劃關聯更新問題
- **測試計劃預選問題**：修復編輯時測試計劃預選問題
- **重複顯示問題**：修復測試計劃頁面重複顯示測試計劃欄位
- **重定向錯誤**：修復測試執行建立後重定向問題

#### 🌐 本地化改進
- **完整繁體中文翻譯**：新增所有缺失的翻譯項目
- **按鈕翻譯**：所有按鈕和操作文字都支援繁體中文
- **欄位翻譯**：所有表單欄位和列表欄位都支援繁體中文
- **錯誤訊息翻譯**：所有錯誤訊息都支援繁體中文
- **確認訊息翻譯**：所有確認對話框都支援繁體中文

#### 📚 文件更新
- **完整操作手冊**：更新包含所有新功能的完整操作手冊
- **快速開始指南**：新增簡化的快速開始指南
- **故障排除指南**：新增詳細的故障排除指南
- **常見問題解答**：更新常見問題和解答

### v1.6.2 (2024年12月)
- 修復 Redmine 6.0.6 相容性問題
- 改進權限繼承機制
- 優化查詢效能

### v1.6.1 (2024年11月)
- 新增 CSV 匯入/匯出功能
- 改進統計報表
- 修復多個小錯誤

### v1.6.0 (2024年10月)
- 初始版本發布
- 基本測試案例管理功能
- 測試計劃和測試執行功能

---

## 📞 技術支援

### 聯絡資訊

- **GitHub Issues**: [https://github.com/bluer1211/redmine-testcase-management/issues](https://github.com/bluer1211/redmine-testcase-management/issues)
- **Email**: bluer1211@gmail.com
- **專案網站**: [https://redmine-test-management.sena-networks.co.jp](https://redmine-test-management.sena-networks.co.jp)

### 文件資源

- **完整文件**: [README.md](README.md)
- **更新日誌**: [CHANGELOG.md](CHANGELOG.md)
- **貢獻指南**: [CONTRIBUTING.md](CONTRIBUTING.md)
- **安全政策**: [SECURITY.md](SECURITY.md)
- **快速開始**: [QUICK_START_zh-TW.md](QUICK_START_zh-TW.md)

### 社群支援

- **GitHub Discussions**: [https://github.com/bluer1211/redmine-testcase-management/discussions](https://github.com/bluer1211/redmine-testcase-management/discussions)
- **Redmine 論壇**: [https://www.redmine.org/boards/3](https://www.redmine.org/boards/3)

---

## 📝 版本資訊

- **當前版本**: v1.6.6
- **發布日期**: 2025年1月
- **Redmine 支援**: 6.0.6+
- **Rails 支援**: 7.2.2.1+
- **授權**: GPL v2+

---

**最後更新**: 2025年1月  
**文件版本**: v1.6.6  
**適用版本**: Redmine 6.0.6+
